<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>初探 Ethereum - Hunter Chang</title><meta content="以太坊與比特幣的相關性非常多，本文會稍微提及以太坊之歷史並分享一些關於以太坊的基本運行方式。" name="description"/><meta property="og:url" content="https://foodchain.eth.xyz/posts/Ethereum_1"/><link rel="canonical" href="https://foodchain.eth.xyz/posts/Ethereum_1"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Hunter Chang - Website"/><meta property="og:description" content="以太坊與比特幣的相關性非常多，本文會稍微提及以太坊之歷史並分享一些關於以太坊的基本運行方式。"/><meta property="og:title" content="初探 Ethereum - Hunter Chang"/><meta property="og:image" content="https:foochain1028.eth.xyzundefined"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@huntarosan"/><meta name="twitter:title" content="初探 Ethereum - Hunter Chang"/><meta name="twitter:description" content="以太坊與比特幣的相關性非常多，本文會稍微提及以太坊之歷史並分享一些關於以太坊的基本運行方式。"/><meta name="twitter:image" content="https:foochain1028.eth.xyzundefined"/><meta property="article:published_time" content="2022-07-26"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/2210cfa2dfbe0bba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2210cfa2dfbe0bba.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-153ca532c98eee0d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8c286cbce58fc284.js" defer=""></script><script src="/_next/static/chunks/306-faf99b336d274355.js" defer=""></script><script src="/_next/static/chunks/358-59e534127f537b93.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-7d56ef00b8f0fda5.js" defer=""></script><script src="/_next/static/fPKTQDa0a-U9S5M31bDk1/_buildManifest.js" defer=""></script><script src="/_next/static/fPKTQDa0a-U9S5M31bDk1/_ssgManifest.js" defer=""></script></head><body class="bg-white dark:bg-black text-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if(e){c.add(e|| '')}else{c.add('dark');}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(t){}}();</script><header><div class="max-w-5xl px-8 mx-auto"><div class="flex items-center justify-between py-6"><nav><a class="text-gray-900 dark:text-yellow-200 pr-6 py-4" href="/">Home</a><a class="text-gray-900 dark:text-yellow-200 px-6 py-4" href="/projects">Projects</a><a class="text-gray-900 dark:text-yellow-200 px-6 py-4" href="/posts">Posts</a></nav></div></div></header><main><div class="max-w-5xl px-8 py-4 mx-auto"><article><h1 class="mb-3 text-gray-900 dark:text-white">初探 Ethereum</h1><p class="mb-10 text-sm text-gray-500 dark:text-gray-400">July 26, 2022</p><div class="prose dark:prose-dark"><h2 id="初探-ethereum"><a class="anchor" href="#初探-ethereum"><span class="icon icon-link"></span></a>初探 Ethereum</h2>
<h2 id="前言"><a class="anchor" href="#前言"><span class="icon icon-link"></span></a>前言</h2>
<p>由於以太坊與比特幣的相關性非常多，因此這一篇文章會假設大家已經了解比特幣的基本知識，包含其<strong>區塊運作方式、共識機制以及它的歷史脈絡等</strong>。在這一章節中會介紹關於以太坊運作的方式，可以把這一篇當作以太坊的淺顯介紹。</p>
<p>以我目前的能力沒辦法給出太深切的介紹，因此主要會分享一些關於以太坊的基本運行方式，一些更深入的東西就暫時交給其他大神們，或是未來的我來分享吧！</p>
<h2 id="ethereum-是什麼"><a class="anchor" href="#ethereum-是什麼"><span class="icon icon-link"></span></a>Ethereum 是什麼?</h2>
<p>比特幣在 2008 年金融危機時橫空出世，吸引了許多人的目光，它的區塊鏈上記錄著從創世區塊以來的所有交易，而其主要機制是利用雜湊函式（hash function）與電子簽名（digital signature）等方法來驗證目前的所有交易都是沒有被竄改與驗證雙花問題（double-spending problem）的。
在 2013 年底，以太坊的創辦人 Vitalik Buterin 構想了一個超越當時想法的提案，也就是在比特幣區塊鏈的基礎上建立智能合約的概念，但是當時的開源團隊 Mastercoin 因這個提案不符合當前目標而沒有採用。直到 2013 的 12 月，Vitalik 發起了以太坊的白皮書，隨後才獲得許多人的注意，這時才開始了以太坊建構。</p>
<p>經過多人的研究，最後 <code>Ethereum</code> 的創世區塊（Genesis Block）在 2015 年的 7 月被挖出，它的架構繼承了比特幣的特色如基於區塊鏈上運作，也融合了許多新的功能如智能合約與狀態紀錄，因此可以<strong>暫時先把 <code>Ethereum</code> 想像成具有更多功能的比特幣網路</strong>。</p>
<h2 id="紀錄狀態"><a class="anchor" href="#紀錄狀態"><span class="icon icon-link"></span></a>紀錄狀態</h2>
<p>剛剛有提到，<code>Ethereum</code> 具有「紀錄狀態」的功能，但是所謂的狀態到底是什麼？</p>
<p>首先我們要先來介紹一下「<strong>帳戶（Account）</strong>」的概念：帳戶是一串 16 進位的數字，代表著這個以太鏈上的地址。</p>
<p>在 Ethereum 中帳戶可以分成兩種：</p>
<ul>
<li>第一種是 <code>External-owned account (EOA)</code>，由<strong>擁有私鑰的人</strong>控制，像 metamask 上面複製的那個地址就是屬於 EOA。</li>
<li>第二種是 <code>合約 (contract)</code> ，是由已經撰寫並<strong>部屬到區塊鏈上的程式</strong>控制。</li>
</ul>
<p>兩種帳號的功能都有: <strong>發送、接收、持有代幣。</strong> 此外也可以與合約互動（沒錯，也就是說<strong>合約也可以與合約互動</strong>）。</p>
<p>每一個帳戶中都有一個狀態，這個「帳戶的狀態」可以想成一個 structure，裡面具有四個 attribute: nonce、balance、storageRoot 與 codeHash。</p>
<p><img src="https://i.imgur.com/SXJbWAc.png" alt=""/></p>
<ul>
<li><strong>nonce:</strong> 這個帳戶以 sender 的方式送出了多少個交易。</li>
<li><strong>balance:</strong> 帳戶擁有的 Wei 數量（10 ^ 5 Wei = 1 ETH），其實就是裡面有多少＄。</li>
<li><strong>storage hash:</strong> 以 Merkle Patricia Tree 儲存的 state hash。</li>
<li><strong>code hash:</strong> 以 byteCode 形式儲存的程式碼（也就是智能合約）。</li>
</ul>
<p><img src="https://i.imgur.com/AEt5J6P.png" alt=""/></p>
<p>不同的帳戶中儲存著自己獨有的狀態：</p>
<ul>
<li><code>A -&gt; state_A</code></li>
<li><code>B -&gt; state_B</code></li>
<li><code>C -&gt; state_C</code></li>
</ul>
<p>最後我們把全世界的以太帳號中的狀態全部統整起來，這個狀態就被稱為 World State (如下圖所示)。</p>
<p><img src="https://cdn-images-1.medium.com/max/1390/0*Xp88A5ehxHD5rS-J.png" alt=""/></p>
<p>這些狀態再經由交易 (transaction) 而產生變化。可以把這些狀態的改變想像成一個 function:</p>
<p><img src="https://i.imgur.com/eOFXg30.png" alt=""/></p>
<p>其中 S 代表原本的 World State；S&#x27;則代表新的。// T 代表這個區塊中的交易。</p>
<p>這樣的改變可以變成像是下面這張圖:</p>
<p><img src="https://cdn-images-1.medium.com/max/1390/0*8l2IdJej8sL_ZoMT.png" alt=""/></p>
<p>而以太鏈就是利用這樣的方式將以太鏈上所有帳戶的狀態記錄下來，將一個一個的 World State 串接起來就會形成一個區塊鏈了！</p>
<p><img src="https://i.imgur.com/lK3YgQu.png" alt=""/></p>
<p>另外這邊附上一張更巨觀的圖，上面記錄了在以太鏈上每一個 block 儲存的東西有哪些？未來可能會再深入的討論關於 header、transaction 的內容，但是就這一篇文而言先就暫停在這吧！</p>
<h2 id="evm-ethereum-virtual-machine"><a class="anchor" href="#evm-ethereum-virtual-machine"><span class="icon icon-link"></span></a>EVM (Ethereum Virtual Machine)</h2>
<p>比特幣的運作方式比較像一種「<strong>分散式帳本</strong>」 (distributed ledger)，上面記錄著比特幣的所有交易；但是 <code>Ethereum</code> 除了可以做為帳本以外，它還具有「<strong>智能合約</strong>」的功能。</p>
<p>但是問題來了，以太鏈究竟是如何讓這些智能合約儲存並在整個網路中運作的呢?</p>
<p>其實並不難理解，就如前面所提到，所有帳戶的 state 都會經過交易的洗禮變成新的 state。還記得在每個帳戶的 state 中，有一個 attribute 叫做 codeHash 的嗎？他就是用來儲存這個帳戶上傳的程式碼。</p>
<p><img src="https://cdn-images-1.medium.com/max/1390/0*nwh47MUrrfivJiSy.png" alt=""/></p>
<p>在以太鏈中，交易可以分成兩類:</p>
<ul>
<li>產生合約 （Contract Creation）： 由某個帳戶撰寫了智能合約並部屬 &gt;&gt; 產生合約並儲存在區塊鏈上 &gt;&gt; 產生一個合約專用的地址。</li>
<li>呼叫函式 （Message Call）： 由某個帳戶呼叫別人已經寫好的合約地址中的函式 &gt;&gt; 執行儲存在鏈上的 EVM code &gt;&gt; 使狀態改變。</li>
</ul>
<p>而在儲存後，通常會產生一個合約地址，別人就可以透過這個地址來呼叫合約中的一些函式。</p>
<p>例如:</p>
<p>帳戶 A 將合約上傳後產生了一個新的合約，若帳戶 B 透過 Message Call 呼叫其中的函式（例如: <code>transfer(address _to, uint256 _value)</code>），這時就會執行 EVM code，B 就會轉 <code>_value</code> 的某個 ERC20 token 給在 <code>_to</code> 的地址。</p>
<p>透過將 EVM code 儲存在鏈上的方式 （不過若是要變成開源的合約還是要進行 verify 的動作！），便可以透明化這些程式，讓使用者了解合約中到底寫了些什麼、有沒有什麼漏洞或是詐騙等。利用區塊鏈儲存也可以保證合約只要在上鏈之後便不會被任何人竄改，因為竄改後便會使整個區塊的 hash 值改變而無法驗證。總而言之，EVM 的架構同時保證了合約的公平性與安全性。</p>
<ul>
<li>公平性: 讓資訊對稱化，使用者可以清楚看見合約內容。</li>
<li>安全性: 使用者了解合約內容後可以看到漏洞、詐騙等可能性。</li>
</ul>
<h3 id="opcode--evm-code"><a class="anchor" href="#opcode--evm-code"><span class="icon icon-link"></span></a>OPcode / EVM code</h3>
<p>OPcode 或是 EVM code 究竟是什麼？
大家可以參考<a href="https://ethereum.org/en/developers/docs/evm/opcodes/">這個網站</a>裡面紀錄的 OPcode，其實他就像是個比較低階的機器語言，在我們利用高階語言部屬後，會先經過一個 compiler，轉譯成機器看得懂的語言加以執行。詳細可見下圖。</p>
<p><img src="https://cdn-images-1.medium.com/max/1390/0*yaHo89-w9MYg11Qb.png" alt=""/></p>
<h2 id="以太坊基金會"><a class="anchor" href="#以太坊基金會"><span class="icon icon-link"></span></a>以太坊基金會</h2>
<p>以太坊具有一個<strong>基金會</strong>，這個基金會是由一些區塊鏈公司創立（但是其組成遍佈全球），他們成立的目的是為了以太坊的底層開發、研究、維護等，或是提供一些關於以太坊的教育。且<strong>不管是誰</strong>都可以向基金會提出一些提案，只要通過他們的審核便可以進行提案的運作並獲得相對應的 <code>$$</code> 來做為開發或是執行專案的基金！</p>
<p>像是西西老師在 2018 拿到以太基金會提供的基金來拍攝線上課程（參見<a href="https://superdcc.medium.com/%E8%A5%BF%E8%A5%BF%E6%8B%BF%E5%88%B0%E4%BB%A5%E5%A4%AA%E7%A4%BE%E7%BE%A4%E5%9F%BA%E9%87%91ecf%E7%9A%84%E8%A3%9C%E5%8A%A9-65f7b2c4244a">西西拿到以太社群基金 ECF 的補助</a>），有興趣的可以進入看看。但是要注意的是其提案只能與以太坊有關，雖然我不是數學家，但這聽起來也很合理，畢竟是以太坊專屬的基金會嘛！</p>
<p>就我自己而言，是很喜歡這樣的運行方式的。就我目前的觀察而言，以太坊就像是一個歡迎大家加入的大團體，對於一些能力尚不足的人如我也很大方地給予很多的資源幫助，像是<a href="https://%60ethereum%60.org/en/developers/docs">以太坊的網站</a>中就有很多關於以太坊的知識與教學。</p>
<h2 id="小結"><a class="anchor" href="#小結"><span class="icon icon-link"></span></a>小結</h2>
<p>在蒐集資料時，以太坊的網站真的提供了很多學習資源。文章中大部分的內容都採自於這個<a href="https://ethereum.org/en/developers/docs/">文件</a>裡面，當然也參考了像是 Yellow Paper 那種天書等級的文件 (當然是一個字也沒看懂哈哈)。除此以外以太坊也在他們網站中有放入<a href="https://ethereum.org/en/developers/tutorials/">外部的學習資源</a>，之後我也打算要慢慢把一些資源消化完！</p>
<h3 id="references"><a class="anchor" href="#references"><span class="icon icon-link"></span></a>References</h3>
<h3 id="圖片引用"><a class="anchor" href="#圖片引用"><span class="icon icon-link"></span></a>圖片引用</h3>
<ul>
<li><a href="https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf">Ethereum-evm-illustrated</a></li>
<li><a href="https://docs.polygon.technology/docs/edge/concepts/ethereum-state/#:~:text=The%20account%20state%20contains%20information,account%20has%20an%20account%20state.">Polygon - State in Ethereum</a></li>
</ul>
<h3 id="參考文章"><a class="anchor" href="#參考文章"><span class="icon icon-link"></span></a>參考文章</h3>
<ul>
<li><a href="https://youtu.be/uFBu2P1mwFU">A tour of Ethereum ecosystem</a></li>
<li><a href="https://medium.com/@hsiehyungchen/blockchain%E5%81%9Astate-machine%E6%9C%83%E9%81%87%E4%B8%8A%E7%9A%84%E5%95%8F%E9%A1%8C-2c7e98aaed0b">blockchain 做 state-machine 會遇上的問題</a></li>
<li><a href="https://github.com/Ethereumbook/Ethereumbook">mastering Ethereum</a></li>
<li><a href="https://ethereum.org/en/developers/docs/">以太坊官方 doc</a></li>
</ul></div></article></div></main><footer class="py-8 flex justify-center items-center"><div class="max-w-5xl px-8 mx-auto"><i> <!-- -->Shout out to author of this template -<!-- --> <a class="text-gray-900 dark:text-white" href="https://twitter.com/hunterhchang">Hunter Chang</a></i></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    a: \"a\",\n    span: \"span\",\n    p: \"p\",\n    strong: \"strong\",\n    code: \"code\",\n    ul: \"ul\",\n    li: \"li\",\n    img: \"img\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.h2, {\n      id: \"初探-ethereum\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#初探-ethereum\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"初探 Ethereum\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"前言\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#前言\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"前言\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"由於以太坊與比特幣的相關性非常多，因此這一篇文章會假設大家已經了解比特幣的基本知識，包含其\", _jsx(_components.strong, {\n        children: \"區塊運作方式、共識機制以及它的歷史脈絡等\"\n      }), \"。在這一章節中會介紹關於以太坊運作的方式，可以把這一篇當作以太坊的淺顯介紹。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"以我目前的能力沒辦法給出太深切的介紹，因此主要會分享一些關於以太坊的基本運行方式，一些更深入的東西就暫時交給其他大神們，或是未來的我來分享吧！\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"ethereum-是什麼\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#ethereum-是什麼\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"Ethereum 是什麼?\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"比特幣在 2008 年金融危機時橫空出世，吸引了許多人的目光，它的區塊鏈上記錄著從創世區塊以來的所有交易，而其主要機制是利用雜湊函式（hash function）與電子簽名（digital signature）等方法來驗證目前的所有交易都是沒有被竄改與驗證雙花問題（double-spending problem）的。\\n在 2013 年底，以太坊的創辦人 Vitalik Buterin 構想了一個超越當時想法的提案，也就是在比特幣區塊鏈的基礎上建立智能合約的概念，但是當時的開源團隊 Mastercoin 因這個提案不符合當前目標而沒有採用。直到 2013 的 12 月，Vitalik 發起了以太坊的白皮書，隨後才獲得許多人的注意，這時才開始了以太坊建構。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"經過多人的研究，最後 \", _jsx(_components.code, {\n        children: \"Ethereum\"\n      }), \" 的創世區塊（Genesis Block）在 2015 年的 7 月被挖出，它的架構繼承了比特幣的特色如基於區塊鏈上運作，也融合了許多新的功能如智能合約與狀態紀錄，因此可以\", _jsxs(_components.strong, {\n        children: [\"暫時先把 \", _jsx(_components.code, {\n          children: \"Ethereum\"\n        }), \" 想像成具有更多功能的比特幣網路\"]\n      }), \"。\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"紀錄狀態\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#紀錄狀態\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"紀錄狀態\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"剛剛有提到，\", _jsx(_components.code, {\n        children: \"Ethereum\"\n      }), \" 具有「紀錄狀態」的功能，但是所謂的狀態到底是什麼？\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"首先我們要先來介紹一下「\", _jsx(_components.strong, {\n        children: \"帳戶（Account）\"\n      }), \"」的概念：帳戶是一串 16 進位的數字，代表著這個以太鏈上的地址。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"在 Ethereum 中帳戶可以分成兩種：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"第一種是 \", _jsx(_components.code, {\n          children: \"External-owned account (EOA)\"\n        }), \"，由\", _jsx(_components.strong, {\n          children: \"擁有私鑰的人\"\n        }), \"控制，像 metamask 上面複製的那個地址就是屬於 EOA。\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"第二種是 \", _jsx(_components.code, {\n          children: \"合約 (contract)\"\n        }), \" ，是由已經撰寫並\", _jsx(_components.strong, {\n          children: \"部屬到區塊鏈上的程式\"\n        }), \"控制。\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"兩種帳號的功能都有: \", _jsx(_components.strong, {\n        children: \"發送、接收、持有代幣。\"\n      }), \" 此外也可以與合約互動（沒錯，也就是說\", _jsx(_components.strong, {\n        children: \"合約也可以與合約互動\"\n      }), \"）。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"每一個帳戶中都有一個狀態，這個「帳戶的狀態」可以想成一個 structure，裡面具有四個 attribute: nonce、balance、storageRoot 與 codeHash。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://i.imgur.com/SXJbWAc.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"nonce:\"\n        }), \" 這個帳戶以 sender 的方式送出了多少個交易。\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"balance:\"\n        }), \" 帳戶擁有的 Wei 數量（10 ^ 5 Wei = 1 ETH），其實就是裡面有多少＄。\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"storage hash:\"\n        }), \" 以 Merkle Patricia Tree 儲存的 state hash。\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"code hash:\"\n        }), \" 以 byteCode 形式儲存的程式碼（也就是智能合約）。\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://i.imgur.com/AEt5J6P.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"不同的帳戶中儲存著自己獨有的狀態：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.code, {\n          children: \"A -\u003e state_A\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.code, {\n          children: \"B -\u003e state_B\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.code, {\n          children: \"C -\u003e state_C\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"最後我們把全世界的以太帳號中的狀態全部統整起來，這個狀態就被稱為 World State (如下圖所示)。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://cdn-images-1.medium.com/max/1390/0*Xp88A5ehxHD5rS-J.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"這些狀態再經由交易 (transaction) 而產生變化。可以把這些狀態的改變想像成一個 function:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://i.imgur.com/eOFXg30.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"其中 S 代表原本的 World State；S'則代表新的。// T 代表這個區塊中的交易。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"這樣的改變可以變成像是下面這張圖:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://cdn-images-1.medium.com/max/1390/0*8l2IdJej8sL_ZoMT.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"而以太鏈就是利用這樣的方式將以太鏈上所有帳戶的狀態記錄下來，將一個一個的 World State 串接起來就會形成一個區塊鏈了！\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://i.imgur.com/lK3YgQu.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"另外這邊附上一張更巨觀的圖，上面記錄了在以太鏈上每一個 block 儲存的東西有哪些？未來可能會再深入的討論關於 header、transaction 的內容，但是就這一篇文而言先就暫停在這吧！\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"evm-ethereum-virtual-machine\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#evm-ethereum-virtual-machine\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"EVM (Ethereum Virtual Machine)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"比特幣的運作方式比較像一種「\", _jsx(_components.strong, {\n        children: \"分散式帳本\"\n      }), \"」 (distributed ledger)，上面記錄著比特幣的所有交易；但是 \", _jsx(_components.code, {\n        children: \"Ethereum\"\n      }), \" 除了可以做為帳本以外，它還具有「\", _jsx(_components.strong, {\n        children: \"智能合約\"\n      }), \"」的功能。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"但是問題來了，以太鏈究竟是如何讓這些智能合約儲存並在整個網路中運作的呢?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"其實並不難理解，就如前面所提到，所有帳戶的 state 都會經過交易的洗禮變成新的 state。還記得在每個帳戶的 state 中，有一個 attribute 叫做 codeHash 的嗎？他就是用來儲存這個帳戶上傳的程式碼。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://cdn-images-1.medium.com/max/1390/0*nwh47MUrrfivJiSy.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"在以太鏈中，交易可以分成兩類:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"產生合約 （Contract Creation）： 由某個帳戶撰寫了智能合約並部屬 \u003e\u003e 產生合約並儲存在區塊鏈上 \u003e\u003e 產生一個合約專用的地址。\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"呼叫函式 （Message Call）： 由某個帳戶呼叫別人已經寫好的合約地址中的函式 \u003e\u003e 執行儲存在鏈上的 EVM code \u003e\u003e 使狀態改變。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"而在儲存後，通常會產生一個合約地址，別人就可以透過這個地址來呼叫合約中的一些函式。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"例如:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"帳戶 A 將合約上傳後產生了一個新的合約，若帳戶 B 透過 Message Call 呼叫其中的函式（例如: \", _jsx(_components.code, {\n        children: \"transfer(address _to, uint256 _value)\"\n      }), \"），這時就會執行 EVM code，B 就會轉 \", _jsx(_components.code, {\n        children: \"_value\"\n      }), \" 的某個 ERC20 token 給在 \", _jsx(_components.code, {\n        children: \"_to\"\n      }), \" 的地址。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"透過將 EVM code 儲存在鏈上的方式 （不過若是要變成開源的合約還是要進行 verify 的動作！），便可以透明化這些程式，讓使用者了解合約中到底寫了些什麼、有沒有什麼漏洞或是詐騙等。利用區塊鏈儲存也可以保證合約只要在上鏈之後便不會被任何人竄改，因為竄改後便會使整個區塊的 hash 值改變而無法驗證。總而言之，EVM 的架構同時保證了合約的公平性與安全性。\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"公平性: 讓資訊對稱化，使用者可以清楚看見合約內容。\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"安全性: 使用者了解合約內容後可以看到漏洞、詐騙等可能性。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"opcode--evm-code\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#opcode--evm-code\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"OPcode / EVM code\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"OPcode 或是 EVM code 究竟是什麼？\\n大家可以參考\", _jsx(_components.a, {\n        href: \"https://ethereum.org/en/developers/docs/evm/opcodes/\",\n        children: \"這個網站\"\n      }), \"裡面紀錄的 OPcode，其實他就像是個比較低階的機器語言，在我們利用高階語言部屬後，會先經過一個 compiler，轉譯成機器看得懂的語言加以執行。詳細可見下圖。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://cdn-images-1.medium.com/max/1390/0*yaHo89-w9MYg11Qb.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"以太坊基金會\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#以太坊基金會\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"以太坊基金會\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"以太坊具有一個\", _jsx(_components.strong, {\n        children: \"基金會\"\n      }), \"，這個基金會是由一些區塊鏈公司創立（但是其組成遍佈全球），他們成立的目的是為了以太坊的底層開發、研究、維護等，或是提供一些關於以太坊的教育。且\", _jsx(_components.strong, {\n        children: \"不管是誰\"\n      }), \"都可以向基金會提出一些提案，只要通過他們的審核便可以進行提案的運作並獲得相對應的 \", _jsx(_components.code, {\n        children: \"$$\"\n      }), \" 來做為開發或是執行專案的基金！\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"像是西西老師在 2018 拿到以太基金會提供的基金來拍攝線上課程（參見\", _jsx(_components.a, {\n        href: \"https://superdcc.medium.com/%E8%A5%BF%E8%A5%BF%E6%8B%BF%E5%88%B0%E4%BB%A5%E5%A4%AA%E7%A4%BE%E7%BE%A4%E5%9F%BA%E9%87%91ecf%E7%9A%84%E8%A3%9C%E5%8A%A9-65f7b2c4244a\",\n        children: \"西西拿到以太社群基金 ECF 的補助\"\n      }), \"），有興趣的可以進入看看。但是要注意的是其提案只能與以太坊有關，雖然我不是數學家，但這聽起來也很合理，畢竟是以太坊專屬的基金會嘛！\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"就我自己而言，是很喜歡這樣的運行方式的。就我目前的觀察而言，以太坊就像是一個歡迎大家加入的大團體，對於一些能力尚不足的人如我也很大方地給予很多的資源幫助，像是\", _jsx(_components.a, {\n        href: \"https://%60ethereum%60.org/en/developers/docs\",\n        children: \"以太坊的網站\"\n      }), \"中就有很多關於以太坊的知識與教學。\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"小結\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#小結\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"小結\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"在蒐集資料時，以太坊的網站真的提供了很多學習資源。文章中大部分的內容都採自於這個\", _jsx(_components.a, {\n        href: \"https://ethereum.org/en/developers/docs/\",\n        children: \"文件\"\n      }), \"裡面，當然也參考了像是 Yellow Paper 那種天書等級的文件 (當然是一個字也沒看懂哈哈)。除此以外以太坊也在他們網站中有放入\", _jsx(_components.a, {\n        href: \"https://ethereum.org/en/developers/tutorials/\",\n        children: \"外部的學習資源\"\n      }), \"，之後我也打算要慢慢把一些資源消化完！\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"references\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#references\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"References\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"圖片引用\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#圖片引用\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"圖片引用\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf\",\n          children: \"Ethereum-evm-illustrated\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://docs.polygon.technology/docs/edge/concepts/ethereum-state/#:~:text=The%20account%20state%20contains%20information,account%20has%20an%20account%20state.\",\n          children: \"Polygon - State in Ethereum\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"參考文章\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#參考文章\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"參考文章\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://youtu.be/uFBu2P1mwFU\",\n          children: \"A tour of Ethereum ecosystem\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://medium.com/@hsiehyungchen/blockchain%E5%81%9Astate-machine%E6%9C%83%E9%81%87%E4%B8%8A%E7%9A%84%E5%95%8F%E9%A1%8C-2c7e98aaed0b\",\n          children: \"blockchain 做 state-machine 會遇上的問題\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/Ethereumbook/Ethereumbook\",\n          children: \"mastering Ethereum\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://ethereum.org/en/developers/docs/\",\n          children: \"以太坊官方 doc\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"title":"初探 Ethereum","description":"以太坊與比特幣的相關性非常多，本文會稍微提及以太坊之歷史並分享一些關於以太坊的基本運行方式。","date":"2022-07-26"}},"frontMatter":{"title":"初探 Ethereum","description":"以太坊與比特幣的相關性非常多，本文會稍微提及以太坊之歷史並分享一些關於以太坊的基本運行方式。","date":"2022-07-26"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"Ethereum_1"},"buildId":"fPKTQDa0a-U9S5M31bDk1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>