---
title: zkVaxCard
description: zkVaxCard æ˜¯ä¸€å€‹å¯ä»¥å¹«åŠ©äººå€‘åœ¨ã€Œä¸æ­éœ²ä»»ä½•å€‹äººè³‡è¨Šå¦‚èº«åˆ†è­‰å­—è™Ÿã€å€‹äººç…§ç‰‡æˆ–å¥ä¿å¡å¡è™Ÿã€ä¹‹æƒ…æ³ä¸‹ã€Œè­‰æ˜è‡ªå·±æœ‰æ¥ç¨®éç–«è‹—ã€ä¹‹ç³»çµ±ï¼Œä»¥ React.js ç‚ºå‰ç«¯é–‹ç™¼çš„æ¡†æ¶ã€json-server ä½œç‚ºä¸€å€‹éå¸¸è‡¨æ™‚çš„å¾Œç«¯è³‡æ–™åº«ï¼Œä¸¦ä»¥ Semaphore protocol ä½œç‚ºå…¶èƒŒå¾Œçš„é›¶çŸ¥è­˜è­‰æ˜æŠ€è¡“
date: "2023-02-08"
---

## ZKPlayground Project

_zkVaxCard_

> _Author: Fu-Chuan Chung @ swfLAB_ > _æ„Ÿè¬ @Paul review æ­¤ç¯‡æ–‡ç« _

## ç›®éŒ„

- å‰è¨€
- ç°¡ä»‹
- Semaphore ä»‹ç´¹
- zkVaxCard ç³»çµ±è¨­è¨ˆ
- æŠ€è¡“èªªæ˜
- é‡åˆ°çš„ç“¶é ¸
- çµè«–

## å‰è¨€

> å‰æƒ…æè¦ï¼šæˆ‘å€‘çš„åŸæœ¬ä¸»é¡Œæƒ³ä½¿ç”¨ SBTï¼ˆSoul Bound Tokenï¼‰ã€semaphore åŠ Tornato Cash èƒŒå¾Œä¹‹é›¶çŸ¥è­˜è­‰æ˜æŠ€è¡“ï¼Œä½†å¾Œä¾†å› æ™‚é–“èˆ‡èƒ½åŠ›å•é¡Œæ›´æ”¹æˆæœ€å¾Œçš„å°ˆæ¡ˆã€‚

ZKPlayground æ˜¯ç”±ä»¥å¤ªåŠåŸºé‡‘æœƒåœ¨èƒŒå¾Œæ¨å‹•çš„æ´»å‹•ï¼Œå…§å®¹åŒ…å«è¬›å¸«æ•™æˆé›¶çŸ¥è­˜ç›¸é—œçŸ¥è­˜èˆ‡æ‡‰ç”¨ï¼Œè€Œæœ¬æ–‡æœƒä»‹ç´¹é—œæ–¼ SWF Lab åƒåŠ æˆå“¡ï¼ˆFoodchainã€yanlongã€noomaã€iverï¼‰å››äººåœ¨æ­¤æ´»å‹•ä¸­å®Œæˆçš„ä¸€é …å°ˆæ¡ˆ - **zkVaxCard**ã€‚

## ç°¡ä»‹

**zkVaxCard** æ˜¯ä¸€å€‹å¯ä»¥å¹«åŠ©äººå€‘åœ¨ã€Œä¸æ­éœ²ä»»ä½•å€‹äººè³‡è¨Šå¦‚èº«åˆ†è­‰å­—è™Ÿã€å€‹äººç…§ç‰‡æˆ–å¥ä¿å¡å¡è™Ÿã€ä¹‹æƒ…æ³ä¸‹ã€Œè­‰æ˜è‡ªå·±æœ‰æ¥ç¨®éç–«è‹—ã€ä¹‹ç³»çµ±ï¼Œä»¥ React.js ç‚ºå‰ç«¯é–‹ç™¼çš„æ¡†æ¶ã€json-server ä½œç‚ºä¸€å€‹éå¸¸è‡¨æ™‚çš„å¾Œç«¯è³‡æ–™åº«ï¼Œä¸¦ä»¥ Semaphore protocol ä½œç‚ºå…¶èƒŒå¾Œçš„é›¶çŸ¥è­˜è­‰æ˜æŠ€è¡“ï¼ŒåŒæ™‚åƒè€ƒäº† semaphore ä¸Šçš„ç¯„ä¾‹å°ˆæ¡ˆ - _[Bolierplate](https://github.com/semaphore-protocol/boilerplate)_ã€‚

> æœ¬æ–‡å°‡ä¸æ·±å…¥ semaphore ä¸­ circom é›»è·¯èˆ‡å…¶åŸç†ï¼Œåªæœƒè¬›è¿°å¦‚ä½•ä½¿ç”¨ semaphore å¥—ä»¶èˆ‡å¥—ä»¶ä¸­ç”¨åˆ°çš„ javascript èªæ³•ç­‰ã€‚

# Semaphore

[Semaphore](https://semaphore.appliedzkp.org/) æ˜¯åœ¨ä»¥å¤ªåŠç”Ÿæ…‹ä¸Šé–‹ç™¼çš„ ZKP ç›¸é—œ project ä¹‹ä¸€ï¼Œå¯ä»¥é€é ZKP ä¾†å®Œæˆèº«ä»½çš„èªè­‰ã€‚

- private: ğŸŒš
- public: ğŸŒ

åœ¨ semaphore ä¸­æœ‰å¹¾å€‹é‡è¦çš„å…ƒç´ ï¼š

1. **identity**ï¼šä¸€çµ„èº«ä»½ï¼Œå…¶ä¸­ç”±ä¸‰å€‹éƒ¨åˆ†çµ„æˆï¼š ğŸŒš nullifierã€ğŸŒš trapdoor èˆ‡ ğŸŒ commitmentã€‚å¯ä»¥æŠŠå®ƒæƒ³åƒæˆåœ¨ Ethereum ä¸Šçš„ä¸€å€‹ç§é‘°ï¼ˆnullifier & trapdoorï¼‰èˆ‡åœ°å€ï¼ˆcommitmentï¼‰çš„é—œä¿‚ã€‚
2. **Group**ï¼šsemaphore åˆ©ç”¨ incremental binary Merkle Treeï¼Œä¾†å„²å­˜åœ¨æŸä¸€åœ˜é«”ä¸­çš„æ¯ä¸€å€‹èº«ä»½ï¼ˆæ„æŒ‡æ¯ä¸€å€‹ Merkle Leaf éƒ½æ˜¯ä¸€å€‹ `identity`ï¼‰ã€‚åœ¨éˆä¸Šï¼Œæ¯ä¸€æ£µæ¨¹éƒ½æœƒæ“æœ‰è‡ªå·±çš„ç·¨è™Ÿï¼ˆgroup idï¼‰èˆ‡æ¨¹é«˜ï¼ˆtree depthï¼‰ã€‚
3. **ZKproof**ï¼šæ“æœ‰ identity ä¸¦ä¸”åŠ å…¥ä¸€çµ„ group å¾Œï¼Œä¾¿å¯ä»¥ç”¨ circuit ä¾†è¨ˆç®—å‡ºä¸€æ®µ ZKproofã€‚é€éå‚³é€é€™æ®µ proof åˆ°éˆä¸Šçš„åˆç´„ï¼Œä¾¿å¯ä»¥ã€Œ**ä¸æ­éœ²è‡ªå·±çš„åœ°å€**ã€ä½†å»èƒ½ã€Œ**è­‰æ˜è‡ªå·±æ˜¯å­˜åœ¨æ–¼æŸå€‹åœ˜é«”ä¹‹ä¸­**ã€

Semaphore å·²ç¶“ç”¨ circom å¯«å¥½ä»–å€‘çš„ circuitï¼Œè©³è¦‹ _fig. 1_ã€‚

![](https://i.imgur.com/5sKw3Uo.png)
fig. 1 Circuits in semaphore by [Cedoor](https://github.com/cedoor)

---

èˆ‰ä¾‹ä¾†èªªï¼Œsemaphore å¯ä»¥ç”¨ä¾†å»ºç«‹ä¸€å€‹æŠ•ç¥¨ç³»çµ±ï¼š

æŠ•ç¥¨è€…å¯ä»¥é€é semaphore å–å¾—ä¸€çµ„ ğŸŒš `identity`ï¼ˆ`nullifier` & `trapdoor`ï¼‰ï¼Œåˆ©ç”¨ä¸€ä¸² secret è¨ˆç®—å‡ºä¸€å€‹ ğŸŒ commitmentï¼Œä¸¦å°‡æ­¤ ğŸŒ commitment å­˜å…¥åœ¨éˆä¸Šçš„ Merkle Treeï¼ˆGroupï¼‰ï¼ŒåŒæ™‚è¨ˆç®—å‡ºä¸€å€‹æ–°çš„ Merkle Rootã€‚æ¥è‘—ï¼Œç•¶æŠ•ç¥¨çš„æ™‚å€™ï¼ŒæŠ•ç¥¨è€…å‰‡éœ€è¦é€é semaphore ç”¢ç”Ÿå‡º ZKProofï¼Œéš¨å¾Œå°‡æŠ•ç¥¨è³‡è¨Šã€groupIdã€Merkle Rootã€ZKproof ç­‰è³‡æ–™æäº¤åˆ°åœ¨éˆä¸Šçš„ `verifyProof()`ï¼Œä¾¿å¯ä»¥é©—è­‰æŠ•ç¥¨è€…çš„èº«ä»½ï¼Œä¸¦åœ¨éˆä¸Šå…¬é–‹çš„ç´€éŒ„æŠ•ç¥¨çµæœäº†ã€‚

Semaphore ä¹Ÿåˆ©ç”¨äº†ä¸€å€‹è®Šæ•¸ external nullifier ä¾†é¿å… double signaling ï¼ˆä¾‹ï¼šåŒä¸€çµ„èº«ä»½ä½†æ˜¯æŠ•å…©æ¬¡ç¥¨ï¼‰çš„å•é¡Œï¼Œå¯ä»¥æŠŠå®ƒæƒ³åƒæˆåœ¨ ethereum äº¤æ˜“ä¸­çš„ nonceã€‚

## Verication Flow

æ¥è‘—ä¾†èªªæ˜ zkVaxCard çš„ç³»çµ±æµç¨‹ï¼Œå¯åƒè€ƒ _fig. 2_ã€‚
![](https://i.imgur.com/PcyT88T.png)

fig. 2 System design of zkVaxCard

æ•´å€‹ç³»çµ±æˆ‘å€‘åˆ†æˆå…©å€‹éƒ¨åˆ†ï¼š

- æ³¨å°„çš„é†«å¸«æˆ–å–®ä½ï¼ˆDoctor/ Governmentï¼‰ï¼šé†«ç”Ÿåœ¨é€²è¡Œæ³¨å°„å¾Œéœ€è¦å°‡æ¥ç¨®è€…åŠ é€²å°æ‡‰çš„ group ä¸­ã€‚
- æ¥ç¨®è€…ï¼ˆVaxxerï¼‰ï¼šæƒ³è¦æå‡ºè‡ªå·±æœ‰æ¥ç¨®éç–«è‹—çš„äººã€‚

> åœ¨æˆ‘å€‘çš„ç–«è‹—æ³¨å°„å¡ä¸Šé¢æœƒæœ‰é†«é™¢è­‰æ˜ã€é†«å¸«è“‹ç« ç­‰è³‡è¨Šä¾†è­‰å¯¦é€™å¼µå¡çš„çœŸå½ï¼›å¦å¤–ä¹Ÿé¿å…ä¸€èˆ¬äººä¹Ÿå¯ä»¥éš¨æ„ `addMember()` çš„æƒ…æ³ï¼Œå› æ­¤éœ€è¦ç”±èªè­‰å¾Œé†«å¸«çš„ address æ‰èƒ½åŸ·è¡Œ `addMember()`ã€‚

**æ­¥é©Ÿ**ï¼ˆåƒè€ƒ _fig. 2_ ä¸­çš„ **Step 1 ~ 8**ï¼‰ï¼š

å‰æï¼š

- é†«å¸«ç«¯éœ€è¦è¨­å®šä¸€çµ„ç™½åå–®ï¼ˆè£¡é¢æœƒå­˜æ”¾ Ethereum ä¸Šçš„ addressï¼‰ã€‚
- ä¸‹é¢çš„æ•…äº‹ç™¼ç”Ÿåœ¨ä¸€å€‹æ¥ç¨®è€…æ‰“å®Œç–«è‹—å¾Œã€‚

1. é†«å¸«ç™»å…¥è‡ªå·±çš„ addressï¼Œé€éç™½åå–®èªè­‰å¾Œä¾¿å¯ä»¥åŸ·è¡Œã€‚
2. é†«å¸«æœƒè«‹æ¥ç¨®è€…è¼¸å…¥ä¸€ä¸²åªæœ‰è‡ªå·±çŸ¥é“çš„å¯†ç¢¼ï¼ˆå¸³è™Ÿç‚ºèº«åˆ†è­‰å­—è™Ÿï¼‰ï¼Œç³»çµ±æœƒè¬›é€™ä¸²è³‡è¨Š parse ä¸¦é€²è¡Œ hashï¼Œå¾—åˆ° hï¼Œè£½é€ ä¸€çµ„æ–°çš„ `Identity(h)`ã€‚ï¼ˆåƒæ˜¯åœ¨éŠ€è¡Œè¨­å®šææ¬¾æ©Ÿå¯†ç¢¼ä¸€æ¨£ï¼‰
3. é†«å¸«æŒ‰ä¸‹ `addMember` çš„æŒ‰éˆ•ï¼Œæ­¤æ™‚ç”± semaphore è¨ˆç®—å¾—åˆ°çš„ commitment æœƒé€åˆ°å·²å»ºç«‹çš„åˆç´„ä¸­ï¼Œå­˜æ”¾åœ¨éˆä¸Šçš„å°æ‡‰çš„ Merkle Treeã€‚
4. åŒæ™‚æˆ‘å€‘çš„ database ä¸­ä¹Ÿæœƒå„²å­˜é—œæ–¼æ­¤ commitment çš„è³‡è¨Šï¼ˆåŒ…å« groupIdã€nonceã€commitmentï¼‰ã€‚
5. ç•¶æ¥ç¨®è€…æƒ³è¦æå‡ºè­‰æ˜æ™‚ï¼Œæœƒè¼¸å…¥è‡ªå·±çš„å¸³è™Ÿå¯†ç¢¼ï¼ŒzkVaxCard æœƒé€éå„²å­˜çš„è³‡è¨Šä¾†æª¢æŸ¥æ˜¯å¦æœ‰é€™çµ„ identityã€‚
6. èªè­‰ identity å¾Œï¼Œæœƒé€éä¸€çµ„å­˜åœ¨ç³»çµ±ä¸­çš„ç§é‘°ä¾†èˆ‡éˆä¸Šåˆç´„é€²è¡Œäº¤æ˜“ï¼ˆæ­¤æ­¥çš„ç›®çš„æ˜¯ç‚ºäº†ä¸æ­éœ²æ¥ç¨®è€…åœ°å€ï¼‰ï¼Œå‚³é€ groupIdã€Merkle Rootã€ZKproof ç­‰è³‡è¨Šåˆ° `verify()` ä¸­é€²è¡Œé©—è­‰ã€‚
7. é€é semaphore çš„ `verifyProof()`ï¼Œå¯ä»¥é€²è¡Œæ­¤ identity æ˜¯å¦åœ¨ group çš„é©—è­‰ï¼Œè‹¥æˆåŠŸï¼ˆå›å‚³ Trueï¼‰ï¼Œå‰‡é¡¯ç¤º Successfully Verifiedã€‚
8. é©—è­‰è€…ï¼ˆåƒæ˜¯åº—å®¶æˆ–æ”¿åºœæ©Ÿé—œï¼‰å‰‡å¯ä»¥åƒè€ƒé©—è­‰æˆåŠŸçš„ç•«é¢é€²è¡Œé©—è­‰ã€‚

## æŠ€è¡“è§£æ

> é€™éƒ¨åˆ†æœƒä¾å¾ªä¸Šæ–¹çš„é †åºï¼Œè§£é‡‹åœ¨å…¶ä¸­åšäº†ä»€éº¼äº‹ã€‚

### **password & identity**

åœ¨ä½¿ç”¨è€…è¼¸å…¥å¯†ç¢¼æ™‚ï¼Œæˆ‘å€‘æœƒç”¨ä¸‹é¢çš„æ–¹æ³•å°‡é€™ä¸²è³‡è¨Šè½‰æ›æˆ hash å€¼ï¼š
_in `doctorModal.js`_ï¼š

```javascript
const beforeHash = addId.concat(password);
let seed = keccak256(beforeHash).toString("hex");
//...
```

ä¸¦å°‡å…¶å€¼ç›´æ¥åœ¨ constructor é€å…¥ `Identity` ä¸­ï¼Œè£½ä½œå‡ºä¸€ä¸²å±¬æ–¼æ¥ç¨®è€…è‡ªå·±çš„ identityã€‚
_in `useVax()`_ï¼š

```javascript
import { Identity } from "@semaphore-protocol/identity";
//...
const identity = new Identity(seed);
const identityCommitment = identity.generateCommitment().toString();

// V3 çš„ commitment å‰‡æ˜¯ç›´æ¥å­˜åœ¨ Identity object ä¸­
// ex: const {nullifier, trapdoor, commitment} = new Identity(seed);
//...
```

é€™æ¨£çš„åšæ³•æœ‰å…©å€‹ä¸»è¦ç›®çš„ï¼š

1. ä½¿ç”¨è€…æ¯æ¬¡éƒ½å¯ä»¥ä½¿ç”¨è‡ªå·±è¨˜å¾—ä½çš„å¯†ç¢¼ä¾†åš verifyã€‚
2. ä½¿ç”¨è€…ä¸éœ€è¦è¨˜ä½å…©ä¸²å¾ˆé•·çš„å­—ä¸²ï¼ˆnullifier èˆ‡ trapdoor å…©è€…éƒ½æ˜¯ bytes31ï¼‰

---

### **Add member into onchain merkle tree (group)**

> åœ¨åˆç´„éƒ¨ç½²åˆ°éˆä¸Šæ™‚ï¼Œæœƒå…ˆåœ¨ consturctor ä¸­å»ºç«‹äº”å€‹ groupã€‚

éš¨å¾Œé†«å¸«å°‡æ¥ç¨®è€…åŠ å…¥ group æ™‚ï¼Œæœƒå‘¼å«åœ¨éˆä¸Šåˆç´„ä¸­çš„ `joinGroup()`ï¼š

```solidity
function joinGroup(uint256 identityCommitment, bytes32 username, uint256 groupId) external {
    semaphore.addMember(groupId, identityCommitment);
    if (groupId == vacId[0]) emit NewVaccinater1(identityCommitment, username);
    else if (groupId == vacId[1]) emit NewVaccinater2(identityCommitment, username);
    else if (groupId == vacId[2]) emit NewVaccinater3(identityCommitment, username);
    else if (groupId == vacId[3]) emit NewVaccinater4(identityCommitment, username);
    else if (groupId == vacId[4]) emit NewVaccinater5(identityCommitment, username);
}
```

åœ¨éˆä¸‹å‚³é€äº¤æ˜“ï¼š

```javascript
const transaction = await contract.joinGroup(
  identityCommitment,
  utils.formatBytes32String("seed"),
  groupId[doze - 1]
);
await transaction.wait();
```

---

### **database (json-server)**

å¾Œç«¯çš„éƒ¨åˆ†æˆ‘å€‘åšäº†ä¸€å€‹å¾ˆç°¡å–®çš„ json-serverï¼Œå°±æ˜¯ç›´æ¥åˆ©ç”¨ cli ä¾†è·‘ä¸€å€‹æœ¬åœ°çš„ portã€‚

```bash
$ yarn json-server db.json --port 4000
>
yarn run v1.22.19
$ /Users/foodchain/Documents/swf_lab/ZKP/zkVaxCard/frontend/node_modules/.bin/json-server db.json --port 4000

  \{^_^}/ hi!

  Loading db.json
  Done

  Resources
  http://localhost:4000/vac

  Home
  http://localhost:4000

  Type s + enter at any time to create a snapshot of the database

```

åœ¨ json file ä¸­ï¼Œæ¯çµ„è³‡æ–™æœƒç´€éŒ„ï¼š

- commitmentï¼šé€é seed ç”¢ç”Ÿçš„ commitmentã€‚
- nonceï¼šä½œç‚º external å‚³å…¥çš„è®Šæ•¸ã€‚
- idï¼šä»£è¡¨æœƒå­˜å…¥éˆä¸Šçš„å“ªä¸€å€‹ groupIdã€‚

æ¯æ¬¡é†«å¸«åŠ å…¥ä¸€çµ„ commitment åˆ°éˆä¸Šæ™‚ï¼Œä¹ŸåŒæ™‚æœƒå°‡è³‡è¨Šæ›´æ–°åœ¨æ­¤è™•ã€‚

---

### **Verify**

éœ€è¦è¼¸å…¥ `verify()` çš„åƒæ•¸æœ‰:

1. message
2. Merkle Root
3. nullifierHash
4. ZKProof

ä¸‹é¢æˆ‘å€‘å°±ç”¨ç›¡æ´ªè’ä¹‹åŠ›ç”Ÿå‡ºé€™å¹¾å€‹åƒæ•¸ï¼ˆï¼Ÿï¼‰ï¼Œä½†å…¶å¯¦å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ **Merkle Root**ã€‚

é€™é‚Šçš„æ–¹æ³•ç”± @ChiHaoLu æä¾› ğŸ™ï¼š
é¦–å…ˆè¦å» Goerliï¼ˆä½ éƒ¨ç½²çš„éˆï¼‰ä¸Šçš„ semaphore åˆç´„ï¼ˆåœ¨ Goerli ç‚º[0x5259d32659F1806ccAfcE593ED5a89eBAb85262f](https://goerli.etherscan.io/address/0x5259d32659F1806ccAfcE593ED5a89eBAb85262f)ï¼‰ã€‚

é€é ABI ä¾†å–å¾— function selectorï¼Œä¸¦å–å¾—å…¶ Merkle Rootï¼š

```javascript
const s = new Contract("0x5259d32659F1806ccAfcE593ED5a89eBAb85262f",
    [{
      "inputs": [
        {
          "internalType": "uint256",
          "name": "groupId",
          "type": "uint256"
        }
      ],
      "name": "getMerkleTreeRoot",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }], signer);

const merkleRoot = s.getMerkleTreeRoot(<groupId>); // è¼¸å…¥ä½ å‚³å…¥çš„ groupId
//...
```

éš¨å¾Œä¾¿å¯ä»¥å‚³åˆ°éˆä¸Šé€²è¡Œé©—è­‰äº†ï¼š

```javascript
//...
// verify on chain
const transaction = await contract.verify(
  message,
  root.toString(),
  nullifierHash,
  solidityProof
);

await transaction.wait();

// update external nullifier
await axios.put(`/vac/${data.data[0].id}`, {
  nonce: externalNullifier + 1,
});
```

ä½†åŒæ™‚ä¹Ÿéœ€è¦æ›´æ–°åœ¨ json-server ä¸­çš„ nonceã€‚

## æŠ€è¡“ç“¶é ¸

é€™æ®µæœƒç°¡è¿°ä¸€ä¸‹æˆ‘å€‘åœ¨é–‹ç™¼ä¸­é‡åˆ°çš„ä¸€äº›å•é¡Œï¼Œå¸Œæœ›æœªä¾†å¯ä»¥ä¸è¦å†æ’åŒæ¨£çš„ç‰†ã€‚

### Double Signalingï¼š

åœ¨ç ”ç©¶ semaphore çš„ç¯„ä¾‹å°ˆæ¡ˆæ™‚ï¼Œæˆ‘å€‘ç™¼ç¾ç„¡æ³•é€éç›¸åŒçš„ identity é©—è­‰å…©æ¬¡ï¼Œé€™æ˜¯å› ç‚ºé˜²æ­¢ double signaling çš„å•é¡Œã€‚åœ¨ semaphore ä¸­æ˜¯é€é external nullifier ä¾†é™åˆ¶çš„ï¼Œå› æ­¤åªè¦æ¯æ¬¡å‚³å…¥ verify æ™‚éƒ½å‚³å…¥ä¸åŒçš„ external nullifier ä¾¿å¯ä»¥å®Œæˆã€Œ**åŒä¸€çµ„ identity é‡è¤‡çš„é©—è­‰**ã€ã€‚

### GroupIdï¼š

åœ¨å»ºç«‹ group æ™‚ï¼Œéœ€è¦å‚³å…¥ groupIdã€‚ä½†å¸¸å¸¸å‚³å…¥çš„ groupId å·²ç¶“è¢«åˆ¥äººç”¨éäº†ï¼Œå› æ­¤éœ€è¦æ‰¾åˆ°ä¸€çµ„åˆ¥äººæ²’ä½¿ç”¨éçš„ groupIdã€‚

### Merkle Rootï¼š

åŸæœ¬æˆ‘å€‘åƒç…§ `Bolierplate`ï¼Œå…¶ä¸­ä½¿ç”¨ `generateProof()` ä¾†ç”¢ç”Ÿ proofã€merkleTreeRootã€nullifierHash ç­‰ã€‚
_in [Boilerplate/apps/web-app/src/pages/proof.tsx](https://github.com/semaphore-protocol/boilerplate/blob/main/apps/web-app/src/pages/proofs.tsx#L65)_ï¼š

```javascript
const { proof, merkleTreeRoot, nullifierHash } = await generateProof(
  _identity,
  group,
  env.GROUP_ID,
  feedbackBytes32
);
```

ä½†å¯¦æ¸¬å¾Œç™¼ç¾å®ƒå›å‚³çš„ MerkleRoot æ˜¯éŒ¯çš„ï¼Œå› æ­¤ä½¿ç”¨ä¸Šä¸€æ®µçš„æ–¹æ³•ã€‚

## çµè«–

é›–ç„¶åœ¨å·²ç¶“é–‹æ”¾å¾Œçš„å°ç£ï¼ŒzkVaxCard ä¼¼ä¹æœ‰é»éæ™‚ï¼Œä½†æ˜¯æˆ‘èªçˆ²å®ƒä¹Ÿå¯ä»¥æ‡‰ç”¨åœ¨ä¸€äº›å…¶ä»–çš„é ˜åŸŸï¼Œåƒæ˜¯è²¡ç”¢è­‰æ˜ã€ä¿®èª²è­‰æ›¸ã€èƒ½åŠ›è­‰æ›¸ã€æœƒå“¡åˆ¶åº¦ç­‰ã€‚å¯ä»¥ä¸æ´©æ¼ä½¿ç”¨è€…çš„éš±ç§ï¼ˆåƒæ˜¯éŠ€è¡Œå¸³è™Ÿï¼‰ï¼Œæå‡ºå…·æœ‰å…¬ä¿¡åŠ›çš„è­‰æ˜ã€‚

å¦å¤–æˆ‘èªç‚º password æ›´å®‰å…¨çš„åšæ³•æ˜¯åˆ©ç”¨ä¸€çµ„ EdDSA/EcDSA ç”¢ç”Ÿçš„ç§é‘°ï¼Œå°‡è‡ªå·±è¨­å®šçš„å¯†ç¢¼åšç°½ç« ï¼Œä¸¦å°‡æ­¤ä½œç‚º seedï¼Œä½†æ˜¯åœ¨é–‹ç™¼ä¸Šå¯èƒ½é ˆè€ƒæ…®**ä¾¿åˆ©æ€§å•é¡Œ**ï¼ˆå¦‚ä½¿ç”¨è€…éœ€è¦è¨˜ä½çš„æ±è¥¿æœ‰å¤šå°‘ï¼‰ï¼Œæ‰èƒ½**çœŸæ­£è®“é€™äº›æ‡‰ç”¨å¯¦æ–½åœ¨ç¾å¯¦ç”Ÿæ´»ä¸­**ã€‚

## References

- [ZK-App Client Implementation with Semaphore](https://medium.com/swf-lab/zk-app-client-implementation-with-semaphore-431e49dc32b8)
